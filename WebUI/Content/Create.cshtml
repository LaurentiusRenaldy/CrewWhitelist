@model PermitToWork.Models.WorkingHeight.WorkingHeightEntity
@{
    bool[] isCanEdit = ViewBag.isCanEdit as bool[];
    PermitToWork.Models.User.UserEntity requestor = Session["user"] as PermitToWork.Models.User.UserEntity;
}
<script>
    $(document).ready(function () {
        // addHandlerMenu();

        $('#InputExtensionPtw').css('display', 'none');
        $('#area').css('display', 'none');

        $('input[name = "extensionPtw"]').change(function(){
            if(($(this).val() == 1)){
                $('#InputExtensionPtw').css('display','block');
            }else{
                $('#InputExtensionPtw').css('display','none');
            }
        });

        $('input[name = "area"]').change(function () {
            if (($(this).val() == 0)) {
                $('#area').css('display', 'block');
            } else {
                $('#area').css('display', 'none');
            }
        });
        var a = false;
        $('#access-location > div > .panel-collapse').on('hide', function (e) {
            var id = $(this).attr('id');
            if (!a) {
                if ($('#' + id + '-opt').is(':checked')) {
                    e.preventDefault();
                }
            } else {
                a = !a;
            }
        });

        $('#scaffold .panel-collapse').on('hide', function (e) {
            var id = $(this).attr('id');
            if ($('#' + id + '-opt').is(':checked')) {
                e.preventDefault();
            }
            a = true;
        });

        $('input[name="mandatory-prevention"][value="0"]').change(function () {
            if ($(this).is(':checked')) {
                $('#mandatory-prevention-other').removeAttr('disabled');
            } else {
                $('#mandatory-prevention-other').attr('disabled', 'disabled');
            }
        });

        function startChange() {
            var startDate = start.value();

            if (startDate) {
                startDate = new Date(startDate);
                startDate.setDate(startDate.getDate());
                end.min(startDate);
            }
        }

        function endChange() {
            var endDate = end.value();

            if (endDate) {
                endDate = new Date(endDate);
                endDate.setDate(endDate.getDate());
                start.max(endDate);
            }
        }

        var start = $("#datetimepickerFrom").kendoDateTimePicker({
            change: startChange,
            parseFormats: ["MM/dd/yyyy"]
        }).data("kendoDateTimePicker");

        var end = $("#datetimepickerUntil").kendoDateTimePicker({
            change: endChange,
            parseFormats: ["MM/dd/yyyy"]
        }).data("kendoDateTimePicker");


        var valid = $("#utilization-valid-date").kendoDatePicker({
            parseFormats: ["MM/dd/yyyy"]
        }).data("kendoDatePicker");

        valid.enable(false);

        start.max(end.value());
        end.min(start.value());

        $("#file-attachment").kendoUpload({
            async: {
                saveUrl: "@Url.Action("saveAttachment", "WorkingHeight")",
                removeUrl: "@Url.Action("removeAttachment", "WorkingHeight")",
                autoUpload: true,
            },
            upload: onUpload,
            remove: onRemove,
            success: onSuccessAttachment,
        });

        $fileList = $("#existing-files-attachment");

        if ($fileList.length > 0) {
            $("#file-attachment").parent().parent().parent('div.k-upload').append($fileList);
            $files = $(".k-file");
            _fn = function (item) {
                var $item, fileId, filenames;
                $item = $(item);
                fileId = $item.data("att-id");
                filenames = [
                  {
                      name: fileId
                  }
                ];
                return $item.data("fileNames", filenames);
            };
            for (_i = 0, _len = $files.length; _i < _len; _i++) {
                item = $files[_i];
                _fn(item);
            }
            $fileList.show();
        }

        function onUpload(e) {
            // Array with information about the uploaded files
            var files = e.files;

            // Check the extension of each file and abort the upload if it is not .pdf
            $.each(files, function () {
                if (this.extension != ".pdf") {
                    //alert("Only .pdf files can be uploaded.")
                    //e.preventDefault();
                }
            });
            e.data = { id: '@Model.id' };
        }

        function onRemove(e) {
            e.data = { id: '@Model.id' };
        }

        function onSuccessAttachment(e) {
            var files = e.files;
            // Check the extension of each file and abort the upload if it is not .jpg
            $.each(files, function () {
                $('.k-filename[title="' + this.name + '"]').html('<a href="@Url.Content("~/Upload/WorkingHeight/" + Model.id + "/Attachment")' + this.name + '">' + this.name + '</a>');
            });
        }

        $('input[name = "mandatory-prevention"]:checked').trigger('change');

        @if (!isCanEdit[0])
        {
        <text>
        start.enable(false);
        end.enable(false);
        $('#file-attachment').data('kendoUpload').disable();
        </text>
        }

        $('#inspector').change(function () {
            $.post('@Url.Action("GetInspector","WorkingHeight")', { id: $(this).val() }, function (resp) {
                $('#inspector-certify-no').val(resp.inspectorCertifyNo);
            });
        });

        $('#erection-erector').change(function () {
            $.post('@Url.Action("getErector","WorkingHeight")', { id: $(this).val() }, function (resp) {
                $('#erection-erector-certificate-no').val(resp.certificateNo);
                $('#erection-erector-valid-date').val(resp.validDate);
            });
        });

        $('#dismantling-erector').change(function () {
            $.post('@Url.Action("getErector","WorkingHeight")', { id: $(this).val() }, function (resp) {
                $('#dismantling-erector-certificate-no').val(resp.certificateNo);
                $('#dismantling-erector-valid-date').val(resp.validDate);
            });
        });

        $('#save-as-draft').click(function () {
            var values = getValues();
            values.who = $(this).data('who');
            values = getScreeningValue(values, values.who);
            $.post('@Url.Action("SaveAsDraft","WorkingHeight")', values, function (resp) {
                if (resp.status == "200") {
                    alert('Save success.');
                } else {
                    alert('Something\'s wrong. Please try again.');
                }
                $('#content').load('@Url.Action("Edit", "WorkingHeight")');
            });
        });

        $('#save-send').click(function () {
            var values = getValues();
            var a = false;
            if (values.access == "4" && values.scaffolding == "1") {
                $.ajax({
                    url: '@Url.Action("CheckAttachment","WorkingHeight")',
                    data: { id: '@Model.id' },
                    type: 'POST',
                    async: false,
                    success: function (data) {
                        if (data.status == "404") {
                            alert('Scaffolding design must be attached.');
                            a = true;
                        }
                    }

                });
            }

            if (a) {
                return;
            }
            values.who = $(this).data('who');
            values = getScreeningValue(values, values.who);

            var r = true;
            if (values.who == "3") {
                if (values.pre_screening_req.indexOf("2") < 0 && values.pre_screening_req.indexOf("1") < 0) {
                    alert("Pre Job Screening value cannot be all 'N/A'! Please check the pre job screening section.");
                    return;
                }
                if (r) {
                    if (values.pre_screening_req.indexOf("2") >= 0) {
                        if (values.pre_screening_note.indexOf("Req:") < 0) {
                            alert('Screening contains one or more \'no\'. Please add Notes start with \'Req:\'');
                            $('#screening_remark_required').show();
                            $('#screening_remark_required').html('Notes must be added. Start with \'Req:\'');

                            return;
                        }
                    }
                } else {
                    return;
                }
            } else if (values.who == "5") {
                if (values.pre_screening_fo.indexOf("2") < 0 && values.pre_screening_fo.indexOf("1") < 0) {
                    alert("Pre Job Screening value cannot be all 'N/A'! Please check the pre job screening section.");
                    return;
                }
                if (r) {
                    if (values.pre_screening_fo.indexOf("2") >= 0) {
                        if (values.pre_screening_note.indexOf("FO:") < 0) {
                            alert('Screening contains one or more \'no\'. Please add Notes start with \'FO:\'');
                            $('#screening_remark_required').show();
                            $('#screening_remark_required').html('Notes must be added. Start with \'FO:\'');

                            return;
                        }
                    }
                } else {
                    return;
                }
            }

            $('#loading_gif').show();
            $.post('@Url.Action("SaveAndSend","WorkingHeight")', values, function (resp) {
                $('#loading_gif').hide();
                if (resp.status == "200") {
                    alert('Working at Height Clearance Permit is saved and approved.');
                } else if (resp.status == "201") {
                    alert('Save success. Inspector will be informed to approve.');
                } else {
                    alert('Something\'s wrong. Please try again.');
                }
                $('#content').load('@Url.Action("Edit", "WorkingHeight")');
            });
        });

        $('#sign-inspector').click(function () {
            var values = getValues();
            values.no_inspection = $('#inspection-no').val();
            if (values.no_inspection == null || values.no_inspection == "0") {
                alert('Inspection No must be chosen.');
                $('#inspection-no-valid').show();
                $('#inspection-no').focus();
                return;
            } else {
                $('#inspection-no-valid').hide();
            }
            $('#loading_gif').show();
            $.post('@Url.Action("inspectorSign","WorkingHeight")', values, function (resp) {
                $('#loading_gif').hide();
                if (resp.status == "200") {
                    alert('Save success. Requestor has been notified to do pre-job screening and approving.');
                } else {
                    alert('Something\'s wrong. Please try again.');
                }
                $('#content').load('@Url.Action("Edit", "WorkingHeight")');
            });
        });

        $('#save-as-draft-2').click(function () {
            var values = getValues();
            values.who = $(this).data('who');
            values = getCancelScreeningValue(values, values.who);
            $.post('@Url.Action("SaveAsDraftCancel","WorkingHeight")', values, function (resp) {
                if (resp.status == "200") {
                    alert('Save success.');
                } else {
                    alert('Something\'s wrong. Please try again.');
                }
                $('#content').load('@Url.Action("Edit", "WorkingHeight")');
            });
        });

        $('#save-send-2').click(function () {
            var values = getValues();
            values.who = $(this).data('who');
            values = getCancelScreeningValue(values, values.who);

            var r = true;
            if (values.who == "2") {
                if (values.can_screening_req.indexOf("2") < 0 && values.can_screening_req.indexOf("1") < 0) {
                    alert("Cancellation Screening value cannot be all 'N/A'! Please check the cancellation screening section.");
                    return;
                }
                if (r) {
                    //if (values.pre_screening_req.indexOf("2") >= 0) {
                    //    if (values.pre_screening_note.indexOf("Req:") < 0) {
                    //        alert('Screening contains one or more \'no\'. Please add Notes start with \'Req:\'');
                    //        $('#screening_remark_required').show();
                    //        $('#screening_remark_required').html('Notes must be added. Start with \'Req:\'');

                    //        return;
                    //    }
                    //}
                } else {
                    return;
                }
            } else if (values.who == "4") {
                if (values.can_screening_fo.indexOf("2") < 0 && values.can_screening_fo.indexOf("1") < 0) {
                    alert("Cancellation Screening value cannot be all 'N/A'! Please check the cancellation screening section.");
                    return;
                }
                if (r) {
                    //if (values.pre_screening_fo.indexOf("2") >= 0) {
                    //    if (values.pre_screening_note.indexOf("FO:") < 0) {
                    //        alert('Screening contains one or more \'no\'. Please add Notes start with \'FO:\'');
                    //        $('#screening_remark_required').show();
                    //        $('#screening_remark_required').html('Notes must be added. Start with \'FO:\'');

                    //        return;
                    //    }
                    //}
                } else {
                    return;
                }
            }

            $('#loading_gif').show();
            $.post('@Url.Action("SaveAndSendCancel","WorkingHeight")', values, function (resp) {
                $('#loading_gif').hide();
                if (resp.status == "200") {
                    alert('Working at Height Clearance Permit Cancellation is saved and approved.');
                } else if (resp.status == "201") {
                    alert('Save success. Inspector will be informed to approve.');
                } else {
                    alert('Something\'s wrong. Please try again.');
                }
                $('#content').load('@Url.Action("Edit", "WorkingHeight")');
            });
        });

        $('#reject').click(function () {
            $('#type-reject').val(1);
            $('#who').val($(this).data('who'));
            $('#rejection').modal('show');
        });

        $('#reject-button').click(function () {
            var values = {
                id: '@Model.id',
                comment: $('#comment').val(),
                who: $('#who').val()
            }
            values = getScreeningValue(values, values.who);
            var type = $('#type-reject').val();
            var url = '';
            if (type == "1") {
                url = '@Url.Action("rejectPermit","WorkingHeight")';
            } else if (type == "2") {
                url = '@Url.Action("rejectPermitCancel","WorkingHeight")';
                var values = getScreeningValue(values, 4);
            }

            $.post(url, values, function (resp) {
                if (resp.status == "200") {
                    alert('Working at Height Clearance Permit is rejected.');
                }
                $('#rejection').modal('hide');
                $('#content').load('@Url.Action("Edit", "WorkingHeight")');
            });
        });

        $('#closing').click(function () {
            var values = {
                id: '@Model.id',
            }
            $('#loading_gif').show();
            $.post('@Url.Action("CancelWHPermit", "WorkingHeight")', values, function (resp) {
                $('#loading_gif').hide();
                if (resp.status == "200") {
                    alert("Working Height Clearance Permit Cancelled. Notification has been sent to requestor / erector for cancellation screening.");
                }
                $('#content').load('@Url.Action("Edit", "WorkingHeight")');
            });
        });

        $('#reject-2').click(function () {
            $('#type-reject').val(2);
            $('#who').val($(this).data('who'));
            $('#rejection').modal('show');
        });

        $('#back').click(function () {
            var history = $('#history').val();
            history = history.toLowerCase();
            if (history.indexOf('home') >= 0) {
                window.location = history;
            } else if (history == "") {
                window.location = '@Url.Action("Index","Home")';
            } else {
                $('#content').load(history);
            }
        });

        $('#inspection-no').change(function () {
            $.post('@Url.Action("InspectionNo","WorkingHeight")', { id: $(this).val() }, function (resp) {
                $('#utilization-valid-date').val(resp);
            });
        });

        function getValues() {
            var values = {};
            values.id = '@Model.id';
            values.description = $('#description').val();
            values.work_location = $('#work-location').val();
            values.from = $('#datetimepickerFrom').val();
            values.until = $('#datetimepickerUntil').val();
            values.total_crew = $('#total-crew').val();
            $access = $('input[name="access-location"]:checked');
            values.access = "";
            console.log($access[0]);
            for (var i = 0; i < $access.length; i++) {
                values.access += $($access[i]).val() + "#";
            }
            console.log(values.access);
            if (values.access.indexOf("1") >= 0) {
                var a = [];
                var s = "";
                $('.workbox-access').each(function () {
                    var id = $(this).data('id');
                    a[id] = $(this).val();
                });

                for (var i = 0; i < 4;i++) {
                    s += a[i] + "#";
                }
                values.workbox_access = s.length > 0 ? s.substring(0, s.length - 1) : "";
            }

            if (values.access.indexOf("2") >= 0) {
                var a = [];
                var s = "";
                $('.ladder-access').each(function () {
                    var id = $(this).data('id');
                    a[id] = $(this).val();
                });

                for (var i = 0; i < 4; i++) {
                    s += a[i] + "#";
                }
                values.ladder_access = s.length > 0 ? s.substring(0, s.length - 1) : "";
            }

            if (values.access.indexOf("3") >= 0) {
                var a = [];
                var s = "";
                $('.elevated-access').each(function () {
                    var id = $(this).data('id');
                    a[id] = $(this).val();
                });

                for (var i = 0; i < 3; i++) {
                    s += a[i] + "#";
                }
                values.elevated_access = s.length > 0 ? s.substring(0, s.length - 1) : "";
            }

            if (values.access.indexOf("4") >= 0) {
                values.load_capacity = $('#load-capacity').val();
                values.no_person = $('#no-person').val();
                values.scaffolding = $('input[name="scaffolding-option"]:checked').val();
                var a = [];
                var s = "";
                $('.scaffold-access').each(function () {
                    var id = $(this).data('id');
                    a[id] = $(this).val();
                });

                for (var i = 0; i < 3; i++) {
                    s += a[i] + "#";
                }
                values.scaffold_access = s.length > 0 ? s.substring(0, s.length - 1) : "";

                if (values.scaffolding == "1") {
                    values.erector = $('#erection-erector').val();
                    values.erector_valid_date = $('#erection-erector-valid-date').val();
                    values.erector_certificate_no = $('#erection-erector-certificate-no').val();
                } else if (values.scaffolding == "2") {
                    values.inspector = $('#inspector').val();
                    values.inspector_certify_no = $('#inspector-certify-no').val();
                    values.utilization_valid_date = $('#utilization-valid-date').val();
                } else if (values.scaffolding == "3") {
                    values.erector = $('#dismantling-erector').val();
                    values.erector_valid_date = $('#dismantling-erector-valid-date').val();
                    values.erector_certificate_no = $('#dismantling-erector-certificate-no').val();
                }
            }

            values.mandatory_fall_prevention = "";
            $('input[name="mandatory-prevention"]:checked').each(function () {
                var val = $(this).val();
                if (val == "0") {
                    val = $('#mandatory-prevention-other').val();
                }
                values.mandatory_fall_prevention += val + '#';
            });

            if (values.mandatory_fall_prevention.length > 0) values.mandatory_fall_prevention = values.mandatory_fall_prevention.substring(0, values.mandatory_fall_prevention.length - 1);
            //values.mandatory_fall_prevention = $('input[name="mandatory-prevention"]:checked').val();

            //if (values.mandatory_fall_prevention == "0") {
            //    values.mandatory_fall_prevention = $('#mandatory-prevention-other').val();
            //}

            var a = [];
            var s = "";
            $('.fall-prevention-assess').each(function () {
                var id = $(this).data('id');
                a[id] = $(this).val();
            });

            for (var i = 0; i < 3; i++) {
                s += a[i] + "#";
            }
            values.fall_prevention_assess = s.length > 0 ? s.substring(0, s.length - 1) : "";

            return values;
        }

        function getScreeningValue(values, id) {
            if (id == "3") {
                var a = [];
                var s = "";
                $('.pre-screening-req').each(function () {
                    var id = $(this).data('id');
                    a[id] = $(this).val();
                });

                for (var i = 0; i < 3; i++) {
                    s += a[i] + "#";
                }
                values.pre_screening_req = s.length > 0 ? s.substring(0, s.length - 1) : "";
                values.pre_screening_note = $('#pre_screening_note').val();
            } else if (id == "5") {
                var a = [];
                var s = "";
                $('.pre-screening-fo').each(function () {
                    var id = $(this).data('id');
                    a[id] = $(this).val();
                });

                for (var i = 0; i < 3; i++) {
                    s += a[i] + "#";
                }
                values.pre_screening_fo = s.length > 0 ? s.substring(0, s.length - 1) : "";
                values.pre_screening_note = $('#pre_screening_note').val();
            } else if (id == 3) {
                var a = [];
                var s = "";
                $('.can-screening-req').each(function () {
                    var id = $(this).data('id');
                    a[id] = $(this).val();
                });

                for (var i = 0; i < 3; i++) {
                    s += a[i] + "#";
                }
                values.can_screening_req = s.length > 0 ? s.substring(0, s.length - 1) : "";
            } else if (id == 4) {
                var a = [];
                var s = "";
                $('.can-screening-fo').each(function () {
                    var id = $(this).data('id');
                    a[id] = $(this).val();
                });

                for (var i = 0; i < 3; i++) {
                    s += a[i] + "#";
                }
                values.can_screening_fo = s.length > 0 ? s.substring(0, s.length - 1) : "";
            }

            return values;
        }

        function getCancelScreeningValue(values, id) {
            if (id == "2") {
                var a = [];
                var s = "";
                $('.can-screening-req').each(function () {
                    var id = $(this).data('id');
                    a[id] = $(this).val();
                });

                for (var i = 0; i < 3; i++) {
                    s += a[i] + "#";
                }
                values.can_screening_req = s.length > 0 ? s.substring(0, s.length - 1) : "";
            } else if (id == "4") {
                var a = [];
                var s = "";
                $('.can-screening-fo').each(function () {
                    var id = $(this).data('id');
                    a[id] = $(this).val();
                });

                for (var i = 0; i < 3; i++) {
                    s += a[i] + "#";
                }
                values.can_screening_fo = s.length > 0 ? s.substring(0, s.length - 1) : "";
            }

            return values;
        }
    })
</script>

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Working At Height</h2>
        <ol id="breadcrumb" class="breadcrumb">
            <li>
                <a href="#" title="Go to Home" class="tip-bottom home"><i class="icon-home"></i> Home</a>
            </li>
            <li>
                <a href="#" class="tip-bottom ptw">Working At Height </a>
            </li>
            <li class="active">
                <a href="#" class="current">Create</a>
            </li>
        </ol>
    </div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="ibox">
        <div class="ibox-content">
            <div class="row">
                <div class="col-xs-3 logo">
                    <img src="@Url.Content("~/Img/logo-clean.png")" />
                </div>
                <div class="col-xs-6 title">
                    <b>WORKING AT HEIGHT PERMIT</b><br />
                    Star Energy Geothermal (Wayang Windu) Limited
                </div>
                <div class="col-xs-3 no">
                    <br /><i>No : @Model.wh_no</i>
                </div>
            </div>

            <div class="separator"></div>

            <table class="table">
                <thead>
                    <tr>
                        <th colspan="4" class="title-form">
                            <b>1. GENERAL INFORMATION</b> <span><i>(Fill by requestor review by Facility Owner)</i></span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="row m-b-none">
                                <div class="col-xs-11">
                                    <p class="form-control-static">
                                        Description of Work at<br />height task
                                    </p>
                                </div>
                                <div class="col-xs-1 no-padding">
                                    <p class="form-control-static">:</p>
                                </div>
                            </div>
                        </td>
                        <td colspan="3">
                            <input class="table-input form-control" id="description" type="text" value="@Model.description" @(isCanEdit[0] ? "" : "disabled")>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div class="row m-b-none">
                                <div class="col-xs-11">
                                    <p class="form-control-static">
                                        Work Location
                                    </p>
                                </div>
                                <div class="col-xs-1 no-padding">
                                    <p class="form-control-static">:</p>
                                </div>
                            </div>
                        </td>
                        <td><input class="table-input form-control" id="work-location" type="text" value="@Model.work_location" @(isCanEdit[0] ? "" : "disabled")></td>
                        <td>From : <input id="datetimepickerFrom" class="datetimepicker" value="@(Model.from != null ? Model.from.Value.ToString("MM/dd/yyyy hh:mm tt") : "")" /></td>
                        <td>Until : <input id="datetimepickerUntil" class="datetimepicker" value="@(Model.until != null ? Model.until.Value.ToString("MM/dd/yyyy hh:mm tt") : "")" /></td>
                    </tr>
                    <tr>
                        <td>
                            <div class="row m-b-none">
                                <div class="col-xs-11">
                                    <p class="form-control-static">
                                        Requestor
                                    </p>
                                </div>
                                <div class="col-xs-1 no-padding">
                                    <p class="form-control-static">:</p>
                                </div>
                            </div>
                        </td>
                        <td><input class="table-input form-control" id="requestor" type="text" disabled value="@Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.REQUESTOR.ToString()].alpha_name"></td>
                        <td colspan="2">
                            <div class="row m-b-none">
                                <div class="col-xs-4">
                                    <p class="form-control-static">
                                        Total crew :
                                    </p>
                                </div>
                                <div class="col-xs-8 no-padding">
                                    @Html.DropDownList("total-crew", ViewBag.listTotalCrew as List<SelectListItem>, (isCanEdit[0] ? new { @class = "form-control" } as object : new { @class = "form-control", disabled = "disabled" } as object))
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <table class="table">
                <thead>
                    <tr>
                        <th class="title-form">
                            <b>2. ACCESS TO WORK LOCATION AT HEIGHT</b>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="panel-group" id="access-location">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <div class="checkbox">
                                            <label data-toggle="collapse" data-target="#work-box" aria-controls="work-box">
                                                <input type="checkbox" id="work-box-opt" value="1" class="accordion-toggle" name="access-location" @(Model.access.Contains('1') ? "checked" : "") @(isCanEdit[0] ? "" : "disabled")> WORK BOX
                                            </label>
                                        </div>
                                    </div>
                                    <div id="work-box" class="collapse @(Model.access.Contains('1') ? "in" : "")">
                                        <div class="panel-body">
                                            <table class="table table-bordered">
                                                <tbody>
                                                    <tr>
                                                        <td>1) </td>
                                                        <td>Work Box is suitable for the task </td>
                                                        <td>
                                                            <select class="radiography-select workbox-access" data-id="0" id="workbox-access-1" @(isCanEdit[0] ? "" : "disabled")>
                                                                <option value="1" @(Model.workbox_access_arr[0] == "1" ? "selected" : "")>Yes</option>
                                                                <option value="2" @(Model.workbox_access_arr[0] == "2" ? "selected" : "")>No</option>
                                                                <option value="0" @(Model.workbox_access_arr[0] == "0" || Model.workbox_access_arr[0] == "" ? "selected" : "")>N/A</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>2) </td>
                                                        <td>Work box has valid color code and tag available? </td>
                                                        <td>
                                                            <select class="radiography-select workbox-access" data-id="1" id="workbox-access-2" @(isCanEdit[0] ? "" : "disabled")>
                                                                <option value="1" @(Model.workbox_access_arr[1] == "1" ? "selected" : "")>Yes</option>
                                                                <option value="2" @(Model.workbox_access_arr[1] == "2" ? "selected" : "")>No</option>
                                                                <option value="0" @(Model.workbox_access_arr[1] == "0" || Model.workbox_access_arr[1] == "" ? "selected" : "")>N/A</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>3) </td>
                                                        <td>Overhead hazards have been controlled? </td>
                                                        <td>
                                                            <select class="radiography-select workbox-access" data-id="2" id="workbox-access-3" @(isCanEdit[0] ? "" : "disabled")>
                                                                <option value="1" @(Model.workbox_access_arr[2] == "1" ? "selected" : "")>Yes</option>
                                                                <option value="2" @(Model.workbox_access_arr[2] == "2" ? "selected" : "")>No</option>
                                                                <option value="0" @(Model.workbox_access_arr[2] == "0" || Model.workbox_access_arr[2] == "" ? "selected" : "")>N/A</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>4) </td>
                                                        <td>Anchor point for fall arrest is suitable and accessible? </td>
                                                        <td>
                                                            <select class="radiography-select workbox-access" data-id="3" id="workbox-access-4" @(isCanEdit[0] ? "" : "disabled")>
                                                                <option value="1" @(Model.workbox_access_arr[3] == "1" ? "selected" : "")>Yes</option>
                                                                <option value="2" @(Model.workbox_access_arr[3] == "2" ? "selected" : "")>No</option>
                                                                <option value="0" @(Model.workbox_access_arr[3] == "0" || Model.workbox_access_arr[3] == "" ? "selected" : "")>N/A</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <div class="checkbox">
                                            <label>
                                                <input type="checkbox" id="ladder-opt" value="2" class="accordion-toggle" name="access-location" data-toggle="collapse" data-target="#ladder" @(Model.access.Contains('2') ? "checked" : "") @(isCanEdit[0] ? "" : "disabled")> LADDER <small>(portable ladder)</small>
                                            </label>
                                        </div>
                                    </div>
                                    <div id="ladder" class="panel-collapse collapse @(Model.access.Contains('2') ? "in" : "")">
                                        <div class="panel-body">
                                            <table class="table table-bordered">
                                                <tbody>
                                                    <tr>
                                                        <td>1) </td>
                                                        <td>Is the ladder secured and suitable for the task? </td>
                                                        <td>
                                                            <select class="radiography-select ladder-access" data-id="0" id="ladder-access-1" @(isCanEdit[0] ? "" : "disabled")>
                                                                <option value="1" @(Model.ladder_access_arr[0] == "1" ? "selected" : "")>Yes</option>
                                                                <option value="2" @(Model.ladder_access_arr[0] == "2" ? "selected" : "")>No</option>
                                                                <option value="0" @(Model.ladder_access_arr[0] == "0" || Model.ladder_access_arr[0] == "" ? "selected" : "")>N/A</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>2) </td>
                                                        <td>Can work be performed maintaining 3 points of contact? </td>
                                                        <td>
                                                            <select class="radiography-select ladder-access" data-id="1" id="ladder-access-2" @(isCanEdit[0] ? "" : "disabled")>
                                                                <option value="1" @(Model.ladder_access_arr[1] == "1" ? "selected" : "")>Yes</option>
                                                                <option value="2" @(Model.ladder_access_arr[1] == "2" ? "selected" : "")>No</option>
                                                                <option value="0" @(Model.ladder_access_arr[1] == "0" || Model.ladder_access_arr[1] == "" ? "selected" : "")>N/A</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>3) </td>
                                                        <td>Ladder material from non conductive material? </td>
                                                        <td>
                                                            <select class="radiography-select ladder-access" data-id="2" id="ladder-access-3" @(isCanEdit[0] ? "" : "disabled")>
                                                                <option value="1" @(Model.ladder_access_arr[2] == "1" ? "selected" : "")>Yes</option>
                                                                <option value="2" @(Model.ladder_access_arr[2] == "2" ? "selected" : "")>No</option>
                                                                <option value="0" @(Model.ladder_access_arr[2] == "0" || Model.ladder_access_arr[2] == "" ? "selected" : "")>N/A</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>4) </td>
                                                        <td>Does the ladder require fall arrest for use? </td>
                                                        <td>
                                                            <select class="radiography-select ladder-access" data-id="3" id="ladder-access-4" @(isCanEdit[0] ? "" : "disabled")>
                                                                <option value="1" @(Model.ladder_access_arr[3] == "1" ? "selected" : "")>Yes</option>
                                                                <option value="2" @(Model.ladder_access_arr[3] == "2" ? "selected" : "")>No</option>
                                                                <option value="0" @(Model.ladder_access_arr[3] == "0" || Model.ladder_access_arr[3] == "" ? "selected" : "")>N/A</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <div class="checkbox">
                                            <label>
                                                <input type="checkbox" id="elevated-platform-opt" value="3" class="accordion-toggle" name="access-location" data-toggle="collapse" data-target="#elevated-platform" @(Model.access.Contains('3') ? "checked" : "") @(isCanEdit[0] ? "" : "disabled")> ELEVATED WORK PLATFORM <small>(movable work platform equipped by mechanical adjustment for operation)</small>
                                            </label>
                                        </div>
                                    </div>
                                    <div id="elevated-platform" class="panel-collapse collapse @(Model.access.Contains('3') ? "in" : "")">
                                        <div class="panel-body">
                                            <table class="table table-bordered">
                                                <tbody>
                                                    <tr>
                                                        <td>1) </td>
                                                        <td>Has the equipment certified. </td>
                                                        <td>
                                                            <select class="radiography-select elevated-access" data-id="0" id="elevated-access-1" @(isCanEdit[0] ? "" : "disabled")>
                                                                <option value="1" @(Model.elevated_access_arr[0] == "1" ? "selected" : "")>Yes</option>
                                                                <option value="2" @(Model.elevated_access_arr[0] == "2" ? "selected" : "")>No</option>
                                                                <option value="0" @(Model.elevated_access_arr[0] == "0" || Model.elevated_access_arr[0] == "" ? "selected" : "")>N/A</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>2) </td>
                                                        <td>Overhead hazard have been controlled? </td>
                                                        <td>
                                                            <select class="radiography-select elevated-access" data-id="1" id="elevated-access-2" @(isCanEdit[0] ? "" : "disabled")>
                                                                <option value="1" @(Model.elevated_access_arr[1] == "1" ? "selected" : "")>Yes</option>
                                                                <option value="2" @(Model.elevated_access_arr[1] == "2" ? "selected" : "")>No</option>
                                                                <option value="0" @(Model.elevated_access_arr[1] == "0" || Model.elevated_access_arr[1] == "" ? "selected" : "")>N/A</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>3) </td>
                                                        <td>Anchor point for fall arrest suitable and accessible? </td>
                                                        <td>
                                                            <select class="radiography-select elevated-access" data-id="2" id="elevated-access-3" @(isCanEdit[0] ? "" : "disabled")>
                                                                <option value="1" @(Model.elevated_access_arr[2] == "1" ? "selected" : "")>Yes</option>
                                                                <option value="2" @(Model.elevated_access_arr[2] == "2" ? "selected" : "")>No</option>
                                                                <option value="0" @(Model.elevated_access_arr[2] == "0" || Model.elevated_access_arr[2] == "" ? "selected" : "")>N/A</option>
                                                            </select>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <div class="checkbox">
                                            <label>
                                                <input type="checkbox" id="scaffolding-opt" value="4" class="accordion-toggle" name="access-location" data-toggle="collapse" data-target="#scaffolding" @(Model.access.Contains('4') ? "checked" : "") @(isCanEdit[0] ? "" : "disabled")> SCAFFOLDING <small>(for install and dismantle erector must be as permit holder)</small>
                                            </label>
                                        </div>
                                    </div>
                                    <div id="scaffolding" class="panel-collapse collapse @(Model.access.Contains('4') ? "in" : "")">
                                        <div class="row">
                                            <form class="form-horizontal">
                                                <div class="col-xs-6">
                                                    <div class="control-group">
                                                        <label class="control-label" for="load-capacity">Load Capacity</label>
                                                        <div class="controls">
                                                            <input type="text" id="load-capacity" placeholder="Load Capacity" value="@Model.load_capacity" @(isCanEdit[0] ? "" : "disabled")>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xs-6">
                                                    <div class="control-group">
                                                        <label class="control-label" for="inputPassword">No of Person</label>
                                                        <div class="controls">
                                                            <input type="text" id="no-person" placeholder="No of Person" value="@Model.no_person" @(isCanEdit[0] ? "" : "disabled")>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="panel-body">
                                            <div class="accordion" id="scaffold">
                                                <div class="panel panel-default">
                                                    <div class="panel-heading">
                                                        <div class="radio">
                                                            <label>
                                                                <input type="radio" id="erection-opt" value="1" class="accordion-toggle" name="scaffolding-option" data-parent="#scaffold" data-toggle="collapse" data-target="#erection"  @(Model.scaffolding == 1 ? "checked" : "") @(isCanEdit[0] ? "" : "disabled")> Erection
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div id="erection" class="panel-collapse collapse @(Model.scaffolding == 1 ? "in" : "")">
                                                        <div class="panel-body">
                                                            <table class="table">
                                                                <tr>
                                                                    <td>
                                                                        a
                                                                    </td>
                                                                    <td>
                                                                        Erector
                                                                    </td>
                                                                    <td>
                                                                        @Html.DropDownList("erection-erector", ViewBag.listErector as List<SelectListItem>, (isCanEdit[0] ? new { @class = "form-control" } as object : new { @class = "form-control", disabled = "disabled" } as object))
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        b
                                                                    </td>
                                                                    <td>
                                                                        Erector Certificate No:
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" id="erection-erector-certificate-no" value="@Model.erector_certificate_no" disabled />
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        c
                                                                    </td>
                                                                    <td>
                                                                        Valid until, date:
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" id="erection-erector-valid-date" value="@Model.erector_valid_date" disabled/>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        d
                                                                    </td>
                                                                    <td>
                                                                        Has scaffold design been approved?
                                                                    </td>
                                                                    <td>
                                                                        <select class="radiography-select scaffold-access" data-id="0" id="scaffold-access-1" @(isCanEdit[0] ? "" : "disabled")>
                                                                            <option value="1" @(Model.scaffold_access_arr[0] == "1" ? "selected" : "")>Yes</option>
                                                                            <option value="2" @(Model.scaffold_access_arr[0] == "2" ? "selected" : "")>No</option>
                                                                            <option value="0" @(Model.scaffold_access_arr[0] == "0" || Model.scaffold_access_arr[0] == "" ? "selected" : "")>N/A</option>
                                                                        </select>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="panel panel-default">
                                                    <div class="panel-heading">
                                                        <div class="radio">
                                                            <label>
                                                                <input type="radio" id="utilization-opt" value="2" class="accordion-toggle" name="scaffolding-option" data-parent="#scaffold" data-toggle="collapse" data-target="#utilization" @(Model.scaffolding == 2 ? "checked" : "") @(isCanEdit[0] ? "" : "disabled")> Utilization
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div id="utilization" class="panel-collapse collapse @(Model.scaffolding == 2 ? "in" : "")">
                                                        <div class="panel-body">
                                                            <table class="table">
                                                                <tr>
                                                                    <td>
                                                                        a
                                                                    </td>
                                                                    <td>
                                                                        Has the scaffolding been certified?
                                                                    </td>
                                                                    <td>
                                                                        <select class="radiography-select scaffold-access" data-id="1" id="scaffold-access-2" @(isCanEdit[0] ? "" : "disabled")>
                                                                            <option value="1" @(Model.scaffold_access_arr[1] == "1" ? "selected" : "")>Yes</option>
                                                                            <option value="2" @(Model.scaffold_access_arr[1] == "2" ? "selected" : "")>No</option>
                                                                            <option value="0" @(Model.scaffold_access_arr[1] == "0" || Model.scaffold_access_arr[1] == "" ? "selected" : "")>N/A</option>
                                                                        </select>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        b
                                                                    </td>
                                                                    <td>
                                                                        Inspector:
                                                                    </td>
                                                                    <td>
                                                                        @Html.DropDownList("inspector", ViewBag.listInspector as List<SelectListItem>, (isCanEdit[0] ? new { @class = "form-control" } as object : new { @class = "form-control", disabled = "disabled" } as object))
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        c
                                                                    </td>
                                                                    <td>
                                                                        Inspector certify no:
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" id="inspector-certify-no" value="@Model.inspector_certify_no" disabled/>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        d
                                                                    </td>
                                                                    <td>
                                                                        Inspection No:
                                                                        <small id="inspection-no-valid" style="color:red;display:none"><br />Inspection No must be chosen</small>
                                                                    </td>
                                                                    <td>
                                                                        @Html.DropDownList("inspection-no", ViewBag.listNoInspection as List<SelectListItem>, (isCanEdit[1] ? new { @class = "form-control" } as object : new { @class = "form-control", disabled = "disabled" } as object))
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        e
                                                                    </td>
                                                                    <td>
                                                                        Inspection Valid Until:
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" id="utilization-valid-date" value="@(Model.utilization_valid_date != null ? Model.utilization_valid_date.Value.ToString("MM/dd/yyyy hh:mm tt") : "")"/>
                                                                    </td>
                                                                </tr>
                                                                @if (Model.status >= (int)PermitToWork.Models.WorkingHeight.WorkingHeightEntity.WHStatus.EDITANDSEND) {
                                                                <tr>
                                                                    <td colspan="3" class="text-center">
                                                                        <u>Inspector Approval</u><br />
                                                                        @if (isCanEdit[1])
                                                                        {
                                                                            <input type="button" class="btn btn-success" value="Sign" id="sign-inspector" />
                                                                        }
                                                                        else if (Model.inspector_signature != null)
                                                                        {
                                                                            <img id="img-approve-inspector" width="50" height="50" src="@Model.inspector_signature" />
                                                                        }
                                                                        <br /><span>@(Model.inspectorUser != null ? Model.inspectorUser.user.alpha_name : "") @(Model.inspector_signature != null ? "- " + Model.inspector_sign_date.Value.ToString("dd MMM yyyy") : "")</span>
                                                                    </td>
                                                                </tr>
                                                                }
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="panel panel-default">
                                                    <div class="panel-heading">
                                                        <div class="radio">
                                                            <label>
                                                                <input type="radio" id="dismantling-opt" value="3" class="accordion-toggle" name="scaffolding-option" data-parent="#scaffold" data-toggle="collapse" data-target="#dismantling" @(Model.scaffolding == 3 ? "checked" : "") @(isCanEdit[0] ? "" : "disabled")> Dismantling
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div id="dismantling" class="panel-collapse collapse @(Model.scaffolding == 3 ? "in" : "")">
                                                        <div class="panel-body">
                                                            <table class="table">
                                                                <tr>
                                                                    <td>
                                                                        a
                                                                    </td>
                                                                    <td>
                                                                        Erector
                                                                    </td>
                                                                    <td>
                                                                        @Html.DropDownList("dismantling-erector", ViewBag.listErector as List<SelectListItem>, (isCanEdit[0] ? new { @class = "form-control" } as object : new { @class = "form-control", disabled = "disabled" } as object))
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        b
                                                                    </td>
                                                                    <td>
                                                                        Erector Certificate No:
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" id="dismantling-erector-certificate-no" value="@Model.erector_certificate_no" disabled />
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        c
                                                                    </td>
                                                                    <td>
                                                                        Valid until, date:
                                                                    </td>
                                                                    <td>
                                                                        <input type="text" id="dismantling-erector-valid-date" value="@Model.erector_valid_date" disabled/>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
                                                                        d
                                                                    </td>
                                                                    <td>
                                                                        Has dismantle scaffolding approved by previous user?
                                                                    </td>
                                                                    <td>
                                                                        <select class="radiography-select scaffold-access" data-id="2" id="scaffold-access-3" @(isCanEdit[0] ? "" : "disabled")>
                                                                            <option value="1" @(Model.scaffold_access_arr[2] == "1" ? "selected" : "")>Yes</option>
                                                                            <option value="2" @(Model.scaffold_access_arr[2] == "2" ? "selected" : "")>No</option>
                                                                            <option value="0" @(Model.scaffold_access_arr[2] == "0" || Model.scaffold_access_arr[2] == "" ? "selected" : "")>N/A</option>
                                                                        </select>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <table class="table">
                <thead>
                    <tr>
                        <th class="title-form" colspan="5"><b>3. MANDATORY FALL PREVENTION</b></th>
                    </tr>
                </thead>
                <tbody class="col-xs-6 wh-no-margin">
                    <tr>
                        <td>1) </td>
                        <td class="col-xs-6">Mandatory Fall prevention system </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td><label><input type="checkbox" name="mandatory-prevention" value="1" @(Model.mandatory_fall_prevention_arr.Contains("1") ? "checked" : "") @(isCanEdit[0] ? "" : "disabled")/> Fall arrest</label></td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td><label><input type="checkbox" name="mandatory-prevention" value="2" @(Model.mandatory_fall_prevention_arr.Contains("2") ? "checked" : "") @(isCanEdit[0] ? "" : "disabled")/> Safety net</label></td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td><label><input type="checkbox" name="mandatory-prevention" value="0" @(Model.mandatory_fall_prevention_arr.LastOrDefault() != null && Model.mandatory_fall_prevention_arr.LastOrDefault() != "2" && Model.mandatory_fall_prevention_arr.LastOrDefault() != "1" ? "checked" : "") @(isCanEdit[0] ? "" : "disabled")/> Other: </label><input class="table-input form-control" id="mandatory-prevention-other" type="text" value="@(Model.mandatory_fall_prevention_arr.LastOrDefault() != null && Model.mandatory_fall_prevention_arr.LastOrDefault() != "2" && Model.mandatory_fall_prevention_arr.LastOrDefault() != "1" ? Model.mandatory_fall_prevention_arr.LastOrDefault() : "")" disabled></td>
                    </tr>
                </tbody>
                <tbody class="col-xs-6">
                    <tr>
                        <td colspan="2">&nbsp;</td>
                        <td> Yes N/A </td>
                    </tr>
                    <tr>
                        <td>2) </td>
                        <td>Anchor point and landyard restricts fall of no more than 600 mm. </td>
                        <td>
                            <select class="radiography-select fall-prevention-assess" data-id="0" id="fall-prevention-assess-1" @(isCanEdit[0] ? "" : "disabled")>
                                <option value="1" @(Model.fall_prevention_assess_arr[0] == "1" ? "selected" : "")>Yes</option>
                                <option value="2" @(Model.fall_prevention_assess_arr[0] == "2" ? "selected" : "")>No</option>
                                <option value="0" @(Model.fall_prevention_assess_arr[0] == "0" || Model.fall_prevention_assess_arr[0] == "" ? "selected" : "")>N/A</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>3) </td>
                        <td>Equipment to be used in good condition. </td>
                        <td>
                            <select class="radiography-select fall-prevention-assess" data-id="1" id="fall-prevention-assess-2" @(isCanEdit[0] ? "" : "disabled")>
                                <option value="1" @(Model.fall_prevention_assess_arr[1] == "1" ? "selected" : "")>Yes</option>
                                <option value="2" @(Model.fall_prevention_assess_arr[1] == "2" ? "selected" : "")>No</option>
                                <option value="0" @(Model.fall_prevention_assess_arr[1] == "0" || Model.fall_prevention_assess_arr[1] == "" ? "selected" : "")>N/A</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>4) </td>
                        <td>Equipment designed to limit fall potential. </td>
                        <td>
                            <select class="radiography-select fall-prevention-assess" data-id="2" id="fall-prevention-assess-3" @(isCanEdit[0] ? "" : "disabled")>
                                <option value="1" @(Model.fall_prevention_assess_arr[2] == "1" ? "selected" : "")>Yes</option>
                                <option value="2" @(Model.fall_prevention_assess_arr[2] == "2" ? "selected" : "")>No</option>
                                <option value="0" @(Model.fall_prevention_assess_arr[2] == "0" || Model.fall_prevention_assess_arr[2] == "" ? "selected" : "")>N/A</option>
                            </select>
                        </td>
                    </tr>
                </tbody>
            </table>

            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th class="title-form" colspan="4"><b>4. PRE-JOB SCREENING</b> <span><i>(Fill assessment with yes, no, or N/A; Req: Requestor; Er: Erector; FO: Facility Owner)</i></span></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="2" class="radio-title-form"><b>No</b></td>
                        <td rowspan="2" class="radio-title-form"><b>Description</b></td>
                        <td colspan="2" class="radio-title-form"><b>Assessment</b></td>
                    </tr>
                    <tr>
                        <td class="radio-title-form">Requestor / Erector *</td>
                        <td class="radio-title-form">FO</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Personnel(s) are competent in working at height</td>
                        <td class="radio-title-form">
                            <select class="radiography-select pre-screening-req" data-id="0" id="pre-screening-req-1" @(isCanEdit[2] ? "" : "disabled")>
                                <option value="1" @(Model.screening_req_arr[0] == "1" ? "selected" : "")>Yes</option>
                                <option value="2" @(Model.screening_req_arr[0] == "2" ? "selected" : "")>No</option>
                                <option value="0" @(Model.screening_req_arr[0] == "0" || Model.screening_req_arr[0] == "" ? "selected" : "")>N/A</option>
                            </select>
                        </td>
                        <td class="radio-title-form">
                            <select class="radiography-select pre-screening-fo" data-id="0" id="pre-screening-fo-1" @(isCanEdit[4] ? "" : "disabled")>
                                <option value="1" @(Model.screening_fo_arr[0] == "1" ? "selected" : "")>Yes</option>
                                <option value="2" @(Model.screening_fo_arr[0] == "2" ? "selected" : "")>No</option>
                                <option value="0" @(Model.screening_fo_arr[0] == "0" || Model.screening_fo_arr[0] == "" ? "selected" : "")>N/A</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Emergency rescue plan is available & work leader/ supervisor has briefed his personnel</td>
                        <td class="radio-title-form">
                            <select class="radiography-select pre-screening-req" data-id="1" id="pre-screening-req-2" @(isCanEdit[2] ? "" : "disabled")>
                                <option value="1" @(Model.screening_req_arr[1] == "1" ? "selected" : "")>Yes</option>
                                <option value="2" @(Model.screening_req_arr[1] == "2" ? "selected" : "")>No</option>
                                <option value="0" @(Model.screening_req_arr[1] == "0" || Model.screening_req_arr[1] == "" ? "selected" : "")>N/A</option>
                            </select>
                        </td>
                        <td class="radio-title-form">
                            <select class="radiography-select pre-screening-fo" data-id="1" id="pre-screening-fo-2" @(isCanEdit[4] ? "" : "disabled")>
                                <option value="1" @(Model.screening_fo_arr[1] == "1" ? "selected" : "")>Yes</option>
                                <option value="2" @(Model.screening_fo_arr[1] == "2" ? "selected" : "")>No</option>
                                <option value="0" @(Model.screening_fo_arr[1] == "0" || Model.screening_fo_arr[1] == "" ? "selected" : "")>N/A</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Working at height can be done with safely way </td>
                        <td class="radio-title-form">
                            <select class="radiography-select pre-screening-req" data-id="2" id="pre-screening-req-3" @(isCanEdit[2] ? "" : "disabled")>
                                <option value="1" @(Model.screening_req_arr[2] == "1" ? "selected" : "")>Yes</option>
                                <option value="2" @(Model.screening_req_arr[2] == "2" ? "selected" : "")>No</option>
                                <option value="0" @(Model.screening_req_arr[2] == "0" || Model.screening_req_arr[2] == "" ? "selected" : "")>N/A</option>
                            </select>
                        </td>
                        <td class="radio-title-form">
                            <select class="radiography-select pre-screening-fo" data-id="2" id="pre-screening-fo-3" @(isCanEdit[4] ? "" : "disabled")>
                                <option value="1" @(Model.screening_fo_arr[2] == "1" ? "selected" : "")>Yes</option>
                                <option value="2" @(Model.screening_fo_arr[2] == "2" ? "selected" : "")>No</option>
                                <option value="0" @(Model.screening_fo_arr[2] == "0" || Model.screening_fo_arr[2] == "" ? "selected" : "")>N/A</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="4">Note <small><i>(write any consent related the working at height permit)</i></small>: <br />
                            <textarea class="table-textarea" id="pre_screening_note" @(isCanEdit[2] || isCanEdit[4] ? "" : "disabled")>@Model.pre_screening_note</textarea>
                        </td>
                    </tr>
                </tbody>
            </table>

            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th colspan="3" class="title-form">
                            <b>5. APPROVAL</b>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="td-centre">
                            @if (Model.requestor_signature != null)
                            {
                            <img id="img_approve_operator" width="50" height="50" @(Model.requestor_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.requestor_signature == null ? "" : Model.requestor_signature.Substring(1))"/><br />
                            }
                        </td>
                        <td class="td-centre">
                            @if (Model.supervisor_signature != null)
                            {
                            <img id="img_approve_supervisor" width="50" height="50" @(Model.supervisor_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.supervisor_signature == null ? "" : Model.supervisor_signature.Substring(1))"/><br />
                            }
                        </td>
                        <td class="td-centre">
                            @if (Model.facility_owner_signature != null)
                            {
                            <img id="img_approve_fo" width="50" height="50" @(Model.facility_owner_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.facility_owner_signature == null ? "" : Model.facility_owner_signature.Substring(1))"/><br />
                            }
                        </td>
                    </tr>
                    <tr>
                        <td class="td-centre">
                            <i><u>Requestor / Erector</u></i><br />
                            @if ((Model.requestor_signature == null && isCanEdit[2]))
                            {
                                if (Model.access.Contains('4') && (Model.scaffolding == 1 || Model.scaffolding == 3))
                                {
                                    if (requestor.id != Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.ERECTOR.ToString()].id) {
                                <text>@requestor.alpha_name<br />a/n </text>
                                    }
                                }
                                else if (requestor.id != Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.REQUESTOR.ToString()].id)
                                {
                                <text>@requestor.alpha_name<br />a/n </text>
                                }
                            }
                            else if ((Model.requestor_signature != null && Model.requestor_signature.Substring(0, 1) == "d"))
                            {
                            
                                <text>@Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.REQUESTORDELEGATE.ToString()].alpha_name<br />a/n </text>
                            }
                            @if (Model.access.Contains('4') && (Model.scaffolding == 1 || Model.scaffolding == 3))
                            {
                                <text>@(Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.ERECTOR.ToString()] != null ? Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.ERECTOR.ToString()].alpha_name : "")</text>
                            }
                            else
                            {
                                <text>@(Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.REQUESTOR.ToString()] != null ? Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.REQUESTOR.ToString()].alpha_name : "")</text>
                            }
                        
                        </td>
                        <td class="td-centre">
                            <i><u>Supervisor</u></i><br />
                            @if ((Model.supervisor_signature == null && isCanEdit[3] && requestor.id != Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.SUPERVISOR.ToString()].id))
                            {
                                <text>@requestor.alpha_name<br />a/n </text>
                            }
                            else if ((Model.supervisor_signature != null && Model.supervisor_signature.Substring(0, 1) == "d"))
                            {
                                <text>@Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.SUPERVISORDELEGATE.ToString()].alpha_name<br />a/n </text>
                            }
                            @(Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.SUPERVISOR.ToString()] != null ? Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.SUPERVISOR.ToString()].alpha_name : "")
                        </td>
                        <td class="td-centre">
                            <i><u>Facility Owner</u></i><br />
                            @if ((Model.facility_owner_signature == null && isCanEdit[4] && requestor.id != Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.FACILITYOWNER.ToString()].id))
                            {
                                <text>@requestor.alpha_name<br />a/n </text>
                            }
                            else if ((Model.facility_owner_signature != null && Model.facility_owner_signature.Substring(0, 1) == "d"))
                            {
                                <text>@Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.FACILITYOWNERDELEGATE.ToString()].alpha_name<br />a/n </text>
                            }
                            @(Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.FACILITYOWNER.ToString()] != null ? Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.FACILITYOWNER.ToString()].alpha_name : "")
                        </td>
                    </tr>
                </tbody>
            </table>

            @if (Model.status >= (int)PermitToWork.Models.WorkingHeight.WorkingHeightEntity.WHStatus.CLOSING) {
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th colspan="4" class="title-form">
                                <b>6. CANCELATION </b><span><i>(Worker supervisor responsible to completed assessments prior cancellations review by safety officer & facility owner)</i></span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td rowspan="2" class="radio-title-form"><b>No</b></td>
                            <td rowspan="2" class="radio-title-form"><b>Description</b></td>
                            <td colspan="2" class="radio-title-form"><b>Assessment</b></td>
                        </tr>
                        <tr>
                            <td class="radio-title-form">Requestor / Erector *</td>
                            <td class="radio-title-form">FO</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>Working at height completed</td>
                            <td class="radio-title-form">
                                <select class="radiography-select can-screening-req" data-id="0" id="can-screening-req-1" @(isCanEdit[6] ? "" : "disabled")>
                                    <option value="1" @(Model.can_screening_req_arr[0] == "1" ? "selected" : "")>Yes</option>
                                    <option value="2" @(Model.can_screening_req_arr[0] == "2" ? "selected" : "")>No</option>
                                    <option value="0" @(Model.can_screening_req_arr[0] == "0" || Model.can_screening_req_arr[0] == "" ? "selected" : "")>N/A</option>
                                </select>
                            </td>
                            <td class="radio-title-form">
                                <select class="radiography-select can-screening-fo" data-id="0" id="can-screening-fo-1" @(isCanEdit[8] ? "" : "disabled")>
                                    <option value="1" @(Model.can_screening_fo_arr[0] == "1" ? "selected" : "")>Yes</option>
                                    <option value="2" @(Model.can_screening_fo_arr[0] == "2" ? "selected" : "")>No</option>
                                    <option value="0" @(Model.can_screening_fo_arr[0] == "0" || Model.can_screening_fo_arr[0] == "" ? "selected" : "")>N/A</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Are the access to work location height has been disabled <i>(secured , dismantled, demobilized)</i></td>
                            <td class="radio-title-form">
                                <select class="radiography-select can-screening-req" data-id="1" id="can-screening-req-2" @(isCanEdit[6] ? "" : "disabled")>
                                    <option value="1" @(Model.can_screening_req_arr[1] == "1" ? "selected" : "")>Yes</option>
                                    <option value="2" @(Model.can_screening_req_arr[1] == "2" ? "selected" : "")>No</option>
                                    <option value="0" @(Model.can_screening_req_arr[1] == "0" || Model.can_screening_req_arr[1] == "" ? "selected" : "")>N/A</option>
                                </select>
                            </td>
                            <td class="radio-title-form">
                                <select class="radiography-select can-screening-fo" data-id="1" id="can-screening-fo-2" @(isCanEdit[8] ? "" : "disabled")>
                                    <option value="1" @(Model.can_screening_fo_arr[1] == "1" ? "selected" : "")>Yes</option>
                                    <option value="2" @(Model.can_screening_fo_arr[1] == "2" ? "selected" : "")>No</option>
                                    <option value="0" @(Model.can_screening_fo_arr[1] == "0" || Model.can_screening_fo_arr[1] == "" ? "selected" : "")>N/A</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Specific for scaffolding :Are the scaffolding going to  be utilized by other <br /><small><i>If  NO put red tag, erector shall dismantle the scaffolding, If YES  Confirm Scaffolding inspector to check latest condition.</i></small></td>
                            <td class="radio-title-form">
                                <select class="radiography-select can-screening-req" data-id="2" id="can-screening-req-3" @(isCanEdit[6] ? "" : "disabled")>
                                    <option value="1" @(Model.can_screening_req_arr[2] == "1" ? "selected" : "")>Yes</option>
                                    <option value="2" @(Model.can_screening_req_arr[2] == "2" ? "selected" : "")>No</option>
                                    <option value="0" @(Model.can_screening_req_arr[2] == "0" || Model.can_screening_req_arr[2] == "" ? "selected" : "")>N/A</option>
                                </select>
                            </td>
                            <td class="radio-title-form">
                                <select class="radiography-select can-screening-fo" data-id="2" id="can-screening-fo-3" @(isCanEdit[8] ? "" : "disabled")>
                                    <option value="1" @(Model.can_screening_fo_arr[2] == "1" ? "selected" : "")>Yes</option>
                                    <option value="2" @(Model.can_screening_fo_arr[2] == "2" ? "selected" : "")>No</option>
                                    <option value="0" @(Model.can_screening_fo_arr[2] == "0" || Model.can_screening_fo_arr[2] == "" ? "selected" : "")>N/A</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <table class="table table-bordered">
                    <tbody>
                        <tr>
                            <td class="td-centre">
                                @if (Model.can_requestor_signature != null)
                                {
                                <img id="img_approve_operator_can" width="50" height="50" @(Model.can_requestor_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.can_requestor_signature == null ? "" : Model.can_requestor_signature.Substring(1))"/><br />
                                }
                            </td>
                            <td class="td-centre">
                                @if (Model.can_supervisor_signature != null)
                                {
                                <img id="img_approve_supervisor_can" width="50" height="50" @(Model.can_supervisor_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.can_supervisor_signature == null ? "" : Model.can_supervisor_signature.Substring(1))"/><br />
                                }
                            </td>
                            <td class="td-centre">
                                @if (Model.can_facility_owner_signature != null)
                                {
                                <img id="img_approve_fo_can" width="50" height="50" @(Model.can_facility_owner_signature == null ? "style=display:none;" : "style=display:inline-block;")  src="@(Model.can_facility_owner_signature == null ? "" : Model.can_facility_owner_signature.Substring(1))"/><br />
                                }
                            </td>
                        </tr>
                        <tr>
                            <td class="td-centre">
                                <i><u>Requestor / Erector</u></i><br />
                                @if ((Model.can_requestor_signature == null && isCanEdit[10]))
                                {
                                    if (Model.access.Contains('4') && (Model.scaffolding == 1 || Model.scaffolding == 3))
                                    {
                                        if(requestor.id != Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.ERECTOR.ToString()].id) {
                                    <text>@requestor.alpha_name<br />a/n </text>
                                        }
                                    }
                                    else if (requestor.id != Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.REQUESTOR.ToString()].id)
                                    {
                                    <text>@requestor.alpha_name<br />a/n </text>
                                    }
                                }
                                else if ((Model.can_requestor_signature != null && Model.can_requestor_signature.Substring(0, 1) == "d"))
                                {
                            
                                    <text>@Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.CANREQUESTORDELEGATE.ToString()].alpha_name<br />a/n </text>
                                }
                                @if (Model.access.Contains('4') && (Model.scaffolding == 1 || Model.scaffolding == 3))
                                {
                                    <text>@(Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.ERECTOR.ToString()] != null ? Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.ERECTOR.ToString()].alpha_name : "")</text>
                                }
                                else
                                {
                                    <text>@(Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.REQUESTOR.ToString()] != null ? Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.REQUESTOR.ToString()].alpha_name : "")</text>
                                }
                        
                            </td>
                            <td class="td-centre">
                                <i><u>Supervisor</u></i><br />
                                @if ((Model.can_supervisor_signature == null && isCanEdit[11] && requestor.id != Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.SUPERVISOR.ToString()].id))
                                {
                                    <text>@requestor.alpha_name<br />a/n </text>
                                }
                                else if ((Model.can_supervisor_signature != null && Model.can_supervisor_signature.Substring(0, 1) == "d"))
                                {
                                    <text>@Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.CANSUPERVISORDELEGATE.ToString()].alpha_name<br />a/n </text>
                                }
                                @(Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.SUPERVISOR.ToString()] != null ? Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.SUPERVISOR.ToString()].alpha_name : "")
                            </td>
                            <td class="td-centre">
                                <i><u>Facility Owner</u></i><br />
                                @if ((Model.can_facility_owner_signature == null && isCanEdit[12] && requestor.id != Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.FACILITYOWNER.ToString()].id))
                                {
                                    <text>@requestor.alpha_name<br />a/n </text>
                                }
                                else if ((Model.can_facility_owner_signature != null && Model.can_facility_owner_signature.Substring(0, 1) == "d"))
                                {
                                    <text>@Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.CANFACILITYOWNERDELEGATE.ToString()].alpha_name<br />a/n </text>
                                }
                                @(Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.FACILITYOWNER.ToString()] != null ? Model.userInWorkingHeight[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.UserInWorkingHeight.FACILITYOWNER.ToString()].alpha_name : "")
                            </td>
                        </tr>
                    </tbody>
                </table>
            }
            
            <div class="">
                Attachment(s)
                    <input name="files" id="file-attachment" type="file" class="radiography-file" />
                    <ul id="existing-files-attachment" class="k-upload-files k-reset" style="display: none;">
                        @foreach (string file in Model.listDocumentUploaded[PermitToWork.Models.WorkingHeight.WorkingHeightEntity.DocumentUploaded.ATTACHMENT.ToString()])
                        {
                        <li class="k-file" data-att-id="@(file)">
                            <span class="k-icon k-success">uploaded</span>
                            <span class="k-filename" title="@(file)"><a href="@Url.Content("~/Upload/WorkingHeight/" + Model.id + "/Attachment/" + file)" target="_blank">@file</a><span class="k-progress"><span class="k-state-selected k-progress-status" style="width: 100%;"></span></span></span>
                            <button type="button" class="k-button k-button-icontext k-upload-action" @(isCanEdit[0] ? "" : "disabled")><span class="k-icon k-delete"></span>Remove</button>
                        </li>
                        }
                    </ul>
            </div>

            <div class="">
                @if (isCanEdit[0] || isCanEdit[2] || isCanEdit[3] || isCanEdit[4])
                {
                <button class="btn btn-success" id="save-send" data-who="@(isCanEdit[0] ? 1 : (isCanEdit[2] ? 3 : (isCanEdit[3] ? 4 : (isCanEdit[4] ? 5 : 0))))">Save and Send Email</button>  
                if (isCanEdit[0] || isCanEdit[2] || isCanEdit[4]) {
                <button class="btn btn-default" id="save-as-draft" data-who="@(isCanEdit[0] ? 1 : (isCanEdit[2] ? 3 : (isCanEdit[3] ? 4 : (isCanEdit[4] ? 5 : 0))))">Save as Draft</button>
                }
                if (isCanEdit[1] || isCanEdit[2] || isCanEdit[3] || isCanEdit[4]) {
                <button class="btn btn-danger" id="reject" data-who="@(isCanEdit[0] ? 1 : (isCanEdit[2] ? 3 : (isCanEdit[3] ? 4 : (isCanEdit[4] ? 5 : 0))))">Reject</button>
                }
                }
                @if (isCanEdit[5])
                {
                <button class="btn btn-danger" id="closing">Cancel Working at Height Clearance Permit</button>
                }
                @if (isCanEdit[6] || isCanEdit[7] || isCanEdit[8])
                {
                <button class="btn btn-success" id="save-send-2" data-who="@(isCanEdit[6] ? 2 : (isCanEdit[7] ? 3 : (isCanEdit[8] ? 4 : 0)))">Save and Send Email</button>  
                    if (isCanEdit[6] || isCanEdit[8])
                    {
                <button class="btn btn-default" id="save-as-draft-2" data-who="@(isCanEdit[6] ? 2 : (isCanEdit[7] ? 3 : (isCanEdit[8] ? 4 : 0)))">Save as Draft</button>
                    }
                    if (isCanEdit[7] || isCanEdit[8])
                    {
                <button class="btn btn-danger" id="reject-2" data-who="@(isCanEdit[6] ? 2 : (isCanEdit[7] ? 3 : (isCanEdit[8] ? 4 : 0)))">Reject</button>
                    }
                }
                @if (isCanEdit[1]) {
                <button class="btn btn-danger" id="reject" data-who="@(isCanEdit[1] ? 2 : 0)">Reject</button>
                }
                <button class="btn btn-primary" id="back">Back</button>
                <span id="loading_gif" style="display:none"><img src="/Content/Images/loading.gif" alt="loading" width="24" height="24" /> Sending Email.. Please Wait..</span>
            </div>
        </div>
    </div>
</div>



<!-- Modal -->
<div id="rejection" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="Reject" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="Reject">Reject</h3>
  </div>
  <div class="modal-body">
    <label for="comment">Comment</label><textarea id="comment"></textarea>
    <input type="hidden" id="type-reject" value="0" />
      <input type="hidden" id="who" value="0" />
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary" id="reject-button">Reject</button>
    <span id="loading_reject" style="display:none"><img src="/Content/Images/loading.gif" alt="loading" width="24" height="24" /> Sending Email.. Please Wait..</span>
  </div>
</div>